version: 2.1

parameters:
  should-run:
    type: string
    default: "yes"
# specify this dummy command
commands:
  empty:
    parameters:
      after-deps:
        type: steps
        default: []
    steps: 
      - steps: << parameters.after-deps >>

jobs:
  build:
    docker:
      - image: cimg/base:edge
    steps: 
      - empty:
          after-deps: 
            - when: 
                condition: << parameters.should-run >>, "yes"
                steps: 
                  - run: 
                      command: |
                        exit 0
            - checkout
      - run: echo "This is before the conditional step"
      # - when:
      #     condition: 
      #       equal: ["[(\"checkout\")]", "<< parameters.after-deps >>"]
      #     steps:
      #       - run: echo "No steps provided"

workflows:
  workflow:
    jobs:
      - build