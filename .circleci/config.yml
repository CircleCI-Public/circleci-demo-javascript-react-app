orbs:
  node: circleci/node@5.0.2
  path-filtering: circleci/path-filtering@0.1.3
  continuation: circleci/continuation@0.3.1
  
version: 2.1

setup: true

parameters:
  build-code:
    description: is it in src
    type: boolean
    default: failse
  build-docs:
    description: is the change in doc
    type: boolean
    default: true

workflows:
  generate-config:
    jobs:
      - path-filtering/filter:
          base-revision: main
          config-path: .circleci/continue-config.yml
          mapping: |
            src/.* build-code true
            doc/.* build-docs true
