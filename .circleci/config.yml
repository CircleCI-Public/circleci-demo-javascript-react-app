version: 2.1
jobs:
  build-arm-large:
    machine:
      image: ubuntu-2004:current
    resource_class: arm.large
    steps:
      - run: uname -a
      - run: docker-compose --version
      - run: 
          command: |
            curl -L https://github.com/linuxserver/docker-docker-compose/releases/download/v2-2.4.1-r0-ls1/docker-compose-armhf | sudo tee /usr/local/bin/docker-compose > /dev/null
            ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
      - run: docker-compose --version
  build-large:
    machine:
      image: ubuntu-2004:current
    resource_class: large
    steps:
      - run: uname -a
      - run: docker-compose --version
workflows:
  build:
    jobs:
      - build-arm-large
      - build-large