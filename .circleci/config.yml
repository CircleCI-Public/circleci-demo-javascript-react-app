version: 2.1

# specify this dummy command

commands:
  empty:
    parameters:
      after-deps:
        type: steps
        default: []
      should-run:
        type: string
        default: "yes"
    steps: 
      - when: 
          condition: << parameters.should-run >>, "yes"
          steps: 
            - run: 
                command: |
                  exit 1
      - steps: << parameters.after-deps >>

jobs:
  build:
    docker:
      - image: cimg/base:edge
    steps: 
      - empty:
          after-deps: 
            - checkout
      - run: echo "This is before the conditional step"
      # - when:
      #     condition: 
      #       equal: ["[(\"checkout\")]", "<< parameters.after-deps >>"]
      #     steps:
      #       - run: echo "No steps provided"

workflows:
  workflow:
    jobs:
      - build