version: 2.1

parameters:
  continue_pr:
    type: boolean
    default: true 

executors:
    default:
        description: |
            The executor for continuations
        docker:
            - image: cimg/base:stable
        resource_class: small

jobs: 
  check-if-pr-is-ready:
    executor: default
    steps:
      - run: 
          command: | 
            echo "hi"
            while [ $continue_pr ];
              sleep 20000
            exit 0

  lint:
    executor: default
    steps:
      - run: 
          command: | 
            echo "hi"
            while [ $continue_pr ];
              sleep 20000
            exit 0
  static-analysis: 
    executor: default
    steps:
      - run: 
          command: | 
            echo "hi"
            while [ $continue_pr ];
              sleep 10000
            exit 1  
  linux: 
    executor: default
    steps:
      - run: 
          command: | 
            echo "hi"
            while [ $continue_pr ];
              sleep 10000
            exit 1            
  compute-high-level-metrics: 
    executor: default
    steps:
      - run: 
          command: | 
            echo "hi"
            while [ $continue_pr ];
              sleep 10000
            exit 1  
  compute-low-level-metrics: 
    executor: default
    steps:
      - run: 
          command: | 
            echo "hi"
            while [ $continue_pr ];
              sleep 10000
            exit 1
  build-template: 
    executor: default
    steps:
      - run: 
          command: | 
            echo "hi"
            while [ $continue_pr ];
              sleep 10000
            exit 1
workflows:

  default:
    jobs:
      - check-if-pr-is-ready
      - lint
      - static-analysis:
          requires: [ 'check-if-pr-is-ready' ]
      - linux:
          requires: [ 'check-if-pr-is-ready' ]
      - compute-high-level-metrics:
          requires:
            - linux
      - compute-low-level-metrics:
          requires:
            - linux
      - build-template:
          requires: [ 'check-if-pr-is-ready' ]